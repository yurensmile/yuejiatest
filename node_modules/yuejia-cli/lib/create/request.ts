import * as yargs from 'yargs';
import { request } from './templete';
import createFile from './file';
import createDir from './dir';
require('colors');

export default function(): void {
  const argv = yargs.argv;
  const service = argv.service;
  const name = argv.name;
  let writeContent = '';

  if (service && name) {
    writeContent = request(name);
    createDir(`./src/app/model/${service}`, []);
    createFile({
      filepath: `./src/app/model/${service}/`,
      filename: `${name}.ts`,
      writeContent
    });
    console.log(`${name}请求创建成功`.green);
  } else {
    console.log(`service和name参数必填`.red);
  }
}